# -*- mode: Shell-script -*-
# Initialize the types of builds we want

# This is the default, but we could set it elsewhere
# NB: If given as a relative path, may not work...
# OutputRoot ${TOP_SOURCE_DIR}

# Override the default build file emitter style
# SetEmitter ninja

# offer 3 different configurations
# NB: The first one will become the default unless you tag a build as default
BuildType debug Debug
BuildType build Build DEFAULT
BuildType release Release

# turns on c and c++ compile things
# Module cpp
# can specify options, like which compiler to use, like this:
# Module cpp COMPILER clang
# or to add the binary directory to the include path (useful for auto-generated Qt files)
Module cpp COMPILER clang BINARY_INCLUDE


#CPPLibraryConfig static
#CPPLibraryConfig shared

# set the global warnings we care about
Warnings everything no-thread-safety no-padded no-unused-parameter no-c++98-compat-pedantic no-shorten-64-to-32 no-packed no-conversion no-sign-conversion no-disabled-macro-expansion no-global-constructors no-exit-time-destructors no-float-equal
# no-documentation-deprecated-sync

if Building debug; then
CFlags -ggdb -fvar-tracking-uninit -fbounds-check -fcheck-data-deps
fi

if Building build; then
CFlags -O3
Definitions NDEBUG
fi

if Building release; then
CFlags -O3
Definitions NDEBUG RELEASE_MODE
fi

CXXFlags -std=c++11 -stdlib=libc++
LocalVar ldflags -lc++ -lc++abi -L ${CURRENT_BINARY_PATH}/src -lyaco

IncludeDirs include

Definitions __STDC_LIMIT_MACROS _FILE_OFFSET_BITS=64

SubDir src
